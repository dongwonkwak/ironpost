# Phase 1: Core 크레이트 구현 로그

**날짜**: 2026-02-08
**브랜치**: phase/1-core

## 변경 파일
- `Cargo.toml` — workspace.dependencies에 toml, uuid 추가
- `crates/core/Cargo.toml` — serde_json, toml, uuid 의존성 추가
- `crates/core/src/error.rs` — ContainerError, SbomError 추가 + 테스트
- `crates/core/src/event.rs` — EventMetadata, Event trait impl, 생성자 + 테스트
- `crates/core/src/pipeline.rs` — Pipeline async trait, HealthStatus + 테스트
- `crates/core/src/config.rs` — Default, TOML 파싱, 환경변수 오버라이드, 유효성 검증 + 테스트
- `crates/core/src/types.rs` — Display, Default, from_str_loose + 테스트
- `crates/core/src/lib.rs` — 주요 타입 re-export

## 설계 결정
1. **Pipeline trait에 native async fn 사용** — edition 2024에서 지원되므로 `async_trait` 없이 `impl Future + Send` 반환
2. **환경변수 오버라이드** — `IRONPOST_{SECTION}_{FIELD}` 네이밍, 파싱 실패 시 tracing::warn으로 로깅 후 원래 값 유지
3. **config.rs의 `from_str` → `parse` 이름 변경** — clippy `should_implement_trait` 경고 해소
4. **Event trait에서 `to_bytes()` 제거** — 직렬화 책임을 이벤트 자체에서 분리, 별도 모듈에서 처리
5. **`#[serde(default)]` 적용** — 모든 config 구조체에 적용하여 부분 TOML 파싱 지원
6. **unsafe env var 조작** — Rust 2024 edition에서 `set_var`/`remove_var`가 unsafe, 테스트에서 SAFETY 주석과 함께 사용

## 테스트 결과
- 64 tests passed, 0 failed
- clippy: 0 warnings
- fmt: pass
